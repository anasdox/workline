project:
  id: example
  task_types:
    feature:
      policies:
        ready:
          all: [requirements.accepted, design.reviewed, scope.groomed]
        done:
          all: [ci.passed, review.approved, acceptance.passed]
    bug:
      policies:
        done:
          all: [ci.passed, review.approved]
    technical:
      policies:
        done:
          all: [ci.passed, review.approved, acceptance.passed]
    docs:
      policies:
        done:
          all: [ci.passed, review.approved]
    chore:
      policies:
        done:
          all: [ci.passed, review.approved]
    workshop:
      policies:
        discovery:
          all: [workshop.discovery.completed]
        problem_refinement:
          all: [workshop.problem_refinement.completed]
        eventstorming:
          all: [workshop.eventstorming.completed]
        decision:
          all: [workshop.decision.completed]
        clarify:
          all: [workshop.clarify.completed]
    plan:
      policies:
        done:
          all: [planning.approved]
  iteration_types:
    standard:
      policies:
        validation:
          all: [iteration.approved]
  attestations:
    - id: requirements.accepted
      category: requirements
      description: "Team agreed on scope and requirements"
    - id: design.reviewed
      category: design
      description: "Solution/design reviewed"
    - id: scope.groomed
      category: planning
      description: "Task is sized, dependencies known"
    - id: ci.passed
      category: delivery
      description: "CI pipeline completed successfully"
    - id: review.approved
      category: delivery
      description: "Code review approved"
    - id: acceptance.passed
      category: delivery
      description: "Acceptance criteria validated"
    - id: security.ok
      category: security
      description: "Security checks passed"
    - id: iteration.approved
      category: iteration
      description: "Iteration approved"
    - id: workshop.discovery.completed
      category: workshop
      description: "Discovery workshop completed"
    - id: workshop.problem_refinement.completed
      category: workshop
      description: "Problem refinement workshop completed"
    - id: workshop.eventstorming.completed
      category: workshop
      description: "Event storming workshop completed"
    - id: workshop.decision.completed
      category: workshop
      description: "Decision workshop completed"
    - id: workshop.clarify.completed
      category: workshop
      description: "Clarification workshop completed"
    - id: planning.approved
      category: planning
      description: "Planning approved"
    - id: init.check
      category: system
      description: "Initial project check"
  rbac:
    permissions:
      project.viewer:
        - project.list
        - project.read
        - project.config.read
        - project.status.read
        - project.events.read
      project.admin:
        - project.create
        - project.update
        - project.delete
      task.viewer:
        - task.list
        - task.read
        - task.next
        - task.tree
        - task.validation.read
      task.writer:
        - task.create
        - task.update
        - task.claim
        - task.release
      task.executor:
        - task.done
      iteration.viewer:
        - iteration.list
      iteration.writer:
        - iteration.create
        - iteration.list
        - iteration.set_status
      decision.writer:
        - decision.create
      attestation.viewer:
        - attestation.list
      attestation.writer:
        - attestation.add
        - attestation.list
      rbac.admin:
        - rbac.manage
      force.use:
        - force.use
    roles:
      owner:
        description: "Project owner"
        grants:
          - project.viewer
          - project.admin
          - task.viewer
          - task.writer
          - task.executor
          - iteration.viewer
          - iteration.writer
          - decision.writer
          - attestation.writer
          - rbac.admin
          - force.use
        can_attest:
          - ci.passed
          - review.approved
          - acceptance.passed
          - security.ok
          - iteration.approved
          - init.check
          - workshop.discovery.completed
          - workshop.problem_refinement.completed
          - workshop.eventstorming.completed
          - workshop.decision.completed
          - workshop.clarify.completed
          - planning.approved
      planner:
        description: "Plans work and creates backlog"
        grants:
          - project.viewer
          - task.viewer
          - task.writer
          - iteration.viewer
          - iteration.writer
          - decision.writer
          - attestation.viewer
        can_attest:
          - workshop.discovery.completed
          - workshop.problem_refinement.completed
          - workshop.eventstorming.completed
          - workshop.decision.completed
          - workshop.clarify.completed
      executor:
        description: "Executes tasks and updates status"
        grants:
          - project.viewer
          - task.viewer
          - task.writer
          - task.executor
          - iteration.viewer
          - iteration.writer
          - attestation.writer
        can_attest:
          - ci.passed
      reviewer:
        description: "Reviews work and approves gates"
        grants:
          - project.viewer
          - task.viewer
          - iteration.viewer
          - attestation.writer
        can_attest:
          - review.approved
          - acceptance.passed
          - iteration.approved
          - planning.approved
      dev:
        description: "Developer"
        grants:
          - project.viewer
          - task.viewer
          - task.writer
          - task.executor
          - iteration.viewer
          - attestation.viewer
      security:
        description: "Security"
        grants:
          - project.viewer
          - task.viewer
          - iteration.viewer
          - attestation.writer
        can_attest:
          - security.ok
      observer:
        description: "Read-only observer"
        grants:
          - project.viewer
          - task.viewer
          - iteration.viewer
          - attestation.viewer
